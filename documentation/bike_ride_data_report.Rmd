---
title: "Insights of Bike Ride Data"
author: "Rahat"
date: "2023-06-18"
output:
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


### Dataset
[Google drive link of the data](https://drive.google.com/file/d/1lu9XjTNqO3ZD50sPJE7IMs8Iy8glDsdK/view?usp=sharing)


### Preparations
```{r}
rm(list = ls(all.names = TRUE))
```


### Library Integration
```{r library_import, message=FALSE, warning=FALSE, paged.print=FALSE}
library("tidyverse")
library("ggplot2")
```


### Data set loading
```{r}
df <- read.csv('../dataset/original_bike_data.csv')
```


### Attached all the variables in local environment
```{r attached_warning, message=FALSE, warning=FALSE, paged.print=FALSE}
attach(df)
```


### The columns of the dataset
```{r}
colnames(df)
```


### Calculate unique number of ride
```{r}
total_data_point <- nrow(df)
cat(paste0('Total Number of data point in the data set: ', total_data_point))
```
There were an estimated **5.67 M** rides conducted during the year 2022.


### Ride start date
```{r}
cat(paste0('Lowest date: ', min(started_at), ' | Highest date: ', max(started_at)))
```
All the ride conducted within 1st January 2022 to 31st December 2022


### Null value checking
```{r}
# get null Counts
null_counts <- sapply(df, function(x) sum(is.na(x) | x == ""))
cat(paste0('The summary of null values: \n'))
null_counts
```
The data set is pretty clean. But still has some of the null values in station information related columns. As we have a large amount of data. So, removing the rows that have null values in end_lat and end_lng columns.


```{r}
df <- na.omit(df)
```
After removing the null from end_lat, and end_lng columns I again check the null entries. 


```{r}
# get null Counts
null_counts_new <- sapply(df, function(x) sum(is.na(x) | x == ""))
cat(paste0('The summary of null values: \n'))
null_counts_new
```
Now checking the number of rows in the new data frame. 


```{r}
new_row_counts <- nrow(df)

reduction_rate <- (total_data_point - new_row_counts) * 100 / (total_data_point)
cat(paste0('New data points: ', new_row_counts, ' | Reduce percentage: ', round(reduction_rate, 4), '%'))
```
So, after removing the null values only 0.1 % data have lost.


Again attaching the columns
```{r message=FALSE, warning=FALSE, paged.print=FALSE}
attach(df)
```


### Geting total number of ride
```{r}
cat(paste0('Total number of ride: ', length(unique(ride_id))))
```
Total number of ride conduct during 1st January to 31st December 2022 were **5661859**


### Analysis ride time: 
```{r}
# convert chat to datetime
end_time <- as.POSIXct(ended_at, format = "%Y-%m-%d %H:%M:%S", tz = "UTC")
start_time <- as.POSIXct(started_at, format = "%Y-%m-%d %H:%M:%S", tz = "UTC")

# calculate the difference in secs
trip_duration <- difftime(end_time, start_time, units = "secs")

# calculate sum of time differences
td_sec <- sum(as.double(trip_duration))

td_min <- td_sec %/% 60
td_hr <- td_min %/% 60

trip_time_sec <- td_sec %% 60
trip_time_min <- td_min %% 60

cat(paste0('Total ride time: ', td_hr, " Hour: ", trip_time_min, " Min: ", trip_time_sec, " Sec."))
```
Total ride duration is approximately **1,540,737** Hours




